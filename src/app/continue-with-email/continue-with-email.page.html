<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/signup"></ion-back-button>
    </ion-buttons>
    <ion-title>Connexion par email</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="email-auth-content">
  <!-- En-tête -->
  <div class="header-section">
    <ion-text color="primary">
      <h1 class="page-title">Bienvenue !</h1>
      <p class="page-subtitle">Connectez-vous avec votre email</p>
    </ion-text>
  </div>

  <!-- Formulaire de connexion -->
  <ion-card class="auth-form-card">
    <ion-card-content>
      <form (ngSubmit)="onSubmit()" #emailForm="ngForm">
        <!-- Champ Email -->
        <ion-item class="form-item">
          <ion-label position="stacked">Adresse email</ion-label>
          <ion-input type="email" placeholder="votre@email.com" [(ngModel)]="formData.email" name="email" required email
            #emailInput="ngModel" [class.ion-invalid]="emailInput.invalid && emailInput.touched"></ion-input>
          <ion-note slot="error" *ngIf="emailInput.invalid && emailInput.touched">
            Veuillez entrer une adresse email valide
          </ion-note>
        </ion-item>

        <!-- Champ Mot de passe -->
        <ion-item class="form-item">
          <ion-label position="stacked">Mot de passe</ion-label>
          <ion-input [type]="showPassword ? 'text' : 'password'" placeholder="Votre mot de passe"
            [(ngModel)]="formData.password" name="password" required minlength="6" #passwordInput="ngModel"
            [class.ion-invalid]="passwordInput.invalid && passwordInput.touched"><ion-input-password-toggle slot="end"
              color="primary"></ion-input-password-toggle></ion-input>
          <ion-note slot="error" *ngIf="passwordInput.invalid && passwordInput.touched">
            Le mot de passe doit contenir au moins 6 caractères
          </ion-note>
        </ion-item>

        <!-- Options supplémentaires -->
        <div class="form-options">
          <ion-button fill="clear" size="small" class="forgot-password-btn" (click)="forgotPassword()">
            Mot de passe oublié ?
          </ion-button>
        </div>

        <!-- Boutons d'action -->
        <div class="action-buttons">
          <ion-button expand="block" type="submit" [disabled]="!emailForm.form.valid || isLoading" class="login-button">
            <ion-spinner name="crescent" *ngIf="isLoading"></ion-spinner>
            <span *ngIf="!isLoading">Se connecter</span>
          </ion-button>

          <div class="divider-section">
            <ion-text color="medium">
              <p class="divider-text">ou</p>
            </ion-text>
          </div>

          <ion-button expand="block" fill="outline" color="primary" (click)="switchToSignUp()" [disabled]="isLoading"
            class="signup-button">
            Créer un nouveau compte
          </ion-button>
        </div>
      </form>
    </ion-card-content>
  </ion-card>

  <!-- Footer -->
  <div class="footer-section">
    <ion-text color="medium">
      <p class="terms-text">
        En vous connectant, vous acceptez nos
        <a href="#" class="terms-link">Conditions d'utilisation</a>
        et notre
        <a href="#" class="terms-link">Politique de confidentialité</a>
      </p>
    </ion-text>
  </div>
</ion-content>